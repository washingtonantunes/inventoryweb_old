<!DOCTYPE html>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	template="/WEB-INF/template/_layout.xhtml">
	
	<ui:param name="detailsPanelVisible" value="false"></ui:param>

	<ui:define name="title">
		Gestão de Computadores
	</ui:define>

	<ui:define name="content">
		<h:form id="frm">
			<p:panel id="panelDataTable" closable="true" toggleSpeed="500" closeSpeed="500" widgetVar="panelDataTable">
			
				<p:toolbar id="toolbar" style="padding: 10px">
					<p:toolbarGroup>
		
					</p:toolbarGroup>
		
					<p:toolbarGroup align="right">
						<p:inputText id="paramSearch" placeholder="Digite para pesquisar..." 
							size="20" value="#{managerComputerMB.filter.paramSearch}" />
		
						<p:commandButton value="Pesquisar" icon="pi pi-search"
							actionListener="#{managerComputerMB.search}" update="computerDataTable messages frm:panelDetails"
							process="@this paramSearch" />
					</p:toolbarGroup>
				</p:toolbar>
		
				<p:spacer height="20px" />
				
				<p:dataTable id="computerDataTable" value="#{managerComputerMB.listComputers}" 
					var="computer" emptyMessage="Nenhum Registro Encontrado!" 
					paginator="true" rows="10"
					paginatorPosition="bottom" selectionMode="single"
					selection="#{managerComputerMB.computer}" rowKey="#{computer.id}"
					size="small" stripedRows="true">
		
					<p:ajax event="rowSelect" process="@this" update="computerDataTable frm:panelDetails" onsuccess="PF('panelDetails').close()" />
			
					<p:column headerText="Ações">
						<p:commandButton type="button" icon="pi pi-file-edit" disabled="#{managerComputerMB.computer.id == null or managerComputerMB.computer.id != computer.id}" onclick="PF('panelDetails').show()" />
					</p:column>
					
					<p:column headerText="Número de Série">
						<h:outputText value="#{computer.serialNumber}" />
					</p:column>
		
					<p:column headerText="Tipo">
						<h:outputText value="#{computer.type}" />
					</p:column>
		
					<p:column headerText="N.º Patrimônio" >
						<h:outputText value="#{computer.patrimonyNumber}" />
					</p:column>
		
					<p:column headerText="Marca">
						<h:outputText value="#{computer.brand}" />
					</p:column>

					<p:column headerText="Modelo">
						<h:outputText value="#{computer.model}" />
					</p:column>

					<p:column headerText="Status">
						<h:outputText value="#{computer.status.descricao}" />
					</p:column>
				</p:dataTable>
			</p:panel>
			
			<p:spacer height="10px" />
		
		    <p:panel id="panelDetails" header="Computador" closable="true" toggleSpeed="500"
		                closeSpeed="500" widgetVar="panelDetails" visible="detailsPanelVisible">
		                
		        <p:tabView dynamic="true" cache="true">
					<p:tab title="Dados">
						<p:panelGrid columns="4" layout="grid"
							rendered="#{managerComputerMB.computer ne null}"
							style="width: 100%">
							<p:outputLabel value="Número de Série" for="serialNumber" />
							<p:inputText id="serialNumber" value="#{managerComputerMB.computer.serialNumber}" readonly="true" />

							<p:outputLabel value="Tipo" for="type" />
							<p:inputText id="type" value="#{managerComputerMB.computer.type}" readonly="true" />

							<p:outputLabel value="Marca" for="brand" />
							<p:inputText id="brand" value="#{managerComputerMB.computer.brand}" readonly="true" />
							
							<p:outputLabel value="N.º Patrimônio" for="patrimonyNumber" />
							<p:inputText id="patrimonyNumber" value="#{managerComputerMB.computer.patrimonyNumber}" readonly="true" />

							<p:outputLabel value="Modelo" for="model" />
							<p:inputText id="model" value="#{managerComputerMB.computer.model}" readonly="true" />

							<p:outputLabel value="Host Name" for="hostName" />
							<p:inputText id="hostName" value="#{managerComputerMB.computer.hostName}" readonly="true" />

							<p:outputLabel value="Endereço MAC" for="addressMAC" />
							<p:inputText id="addressMAC" value="#{managerComputerMB.computer.addressMAC}" readonly="true" />

							<p:outputLabel value="Memória RAM" for="memoryRam" />
							<p:inputText id="memoryRam" value="#{managerComputerMB.computer.memoryRam}" readonly="true" />
							
							<p:outputLabel value="Disco Rígido" for="hardDisk" />
							<p:inputText id="hardDisk" value="#{managerComputerMB.computer.hardDisk}" readonly="true" />
							
							<p:outputLabel value="Localização" for="location" />
							<p:inputText id="location" value="#{managerComputerMB.computer.location}" readonly="true" />
							
							<p:outputLabel value="Tipo Custo" for="costType" />
							<p:inputText id="costType" value="#{managerComputerMB.computer.costType}" readonly="true" />
							
							<p:outputLabel value="Valor" for="value" />
							<p:inputText id="value" value="#{managerComputerMB.computer.value}" readonly="true">
								<f:convertNumber type="currency" pattern="R$ #0.00" currencySymbol="R$" locale="pt_BR" />
							</p:inputText>
							
							<p:outputLabel value="Nota Entrada" for="noteEntry" />
							<p:inputText id="noteEntry" value="#{managerComputerMB.computer.noteEntry}" readonly="true" />
							
							<p:outputLabel value="Notas" for="note" />
							<p:inputTextarea id="note" value="#{managerComputerMB.computer.note}" readonly="true" />

							<p:outputLabel value="Data de Entrada" for="dateEntry" />
							<p:outputLabel id="dateEntry" value="#{managerComputerMB.computer.dateEntry}">
								<f:convertDateTime type="date" pattern="dd/MM/yyyy" locale="pt_BR" />
							</p:outputLabel>

							<p:outputLabel value="Status" for="status" />
							<p:outputLabel id="status" value="#{managerComputerMB.computer.status.descricao}" />
						</p:panelGrid>
					</p:tab>
					<p:tab title="Logística">
						<p:fieldset legend="Projeto">
							<p:panelGrid columns="4" rendered="#{managerComputerMB.computer.project ne null}">
								<p:outputLabel value="Projeto" for="project" />
								<p:inputText id="project" value="#{managerComputerMB.computer.project.name}" readonly="true" />
								
								<p:outputLabel value="Centro de Custo" for="costCenter" />
								<p:inputText id="costCenter" value="#{managerComputerMB.computer.project.costCenter}" readonly="true" />
							</p:panelGrid>
							
							<p:outputLabel rendered="#{managerComputerMB.computer.project == null}" value="Nenhum Projeto Vinculado" />
						</p:fieldset>
						
						<p:spacer height="10px" />
						
						<p:fieldset legend="Usuário">
							<p:panelGrid columns="4" rendered="#{managerComputerMB.computer.user ne null}">
								<p:outputLabel value="Matrícula" for="registration" />
								<p:inputText id="registration" value="#{managerComputerMB.computer.user.registration}" readonly="true" />
								
								<p:outputLabel value="Nome" for="nameUser" />
								<p:inputText id="nameUser" value="#{managerComputerMB.computer.user.name}" readonly="true" />
							</p:panelGrid>
							
							<p:outputLabel rendered="#{managerComputerMB.computer.user == null}" value="Nenhum Usuário Vinculado" />
						</p:fieldset>
						
						<p:spacer height="10px" />
						
						<p:fieldset legend="Estação de Trabalho">
							<p:panelGrid columns="4">
								<p:outputLabel value="Código" for="code" />
								<p:inputText id="code" value="workPosition.code" readonly="true" />
								
								<p:outputLabel value="Nome" for="nameWorkPosition" />
								<p:inputText id="nameWorkPosition" value="workPosition.nome" readonly="true" />
							</p:panelGrid>
						</p:fieldset>
					</p:tab>
		            <p:tab title="Alterações">
		                <p:outputPanel>
							<p:dataTable id="changeDataTable"
								value="#{managerComputerMB.computer.changes}" var="change"
								emptyMessage="Nenhum registro encontrado!" rows="10" size="small">
			
								<p:column headerText="Tipo">
									<h:outputText value="#{change.type.descricao}" />
								</p:column>
			
								<p:column headerText="Descrição">
									<h:outputText value="#{change.description}" />
								</p:column>
			
								<p:column headerText="Data">
									<h:outputText value="#{change.date}">
										<f:convertDateTime type="date" pattern="dd/MM/yyyy"
											locale="pt_BR" />
									</h:outputText>
								</p:column>
								
								<p:column headerText="Autor">
									<h:outputText value="#{change.author}" />
								</p:column>
							</p:dataTable>
						</p:outputPanel>
		            </p:tab>
		        </p:tabView>
		    </p:panel>
	    </h:form>
		
	</ui:define>

</ui:composition>